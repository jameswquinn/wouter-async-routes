{"version":3,"sources":["lazy-wouter.js","index.js"],"names":["PathsContext","createContext","Map","usePaths","useContext","Router","_ref","children","fallback","react_default","a","createElement","react","wouter","Route","_ref2","path","factory","paths","_useRoute","useRoute","matches","Object","slicedToArray","Component","useMemo","lazy","useEffect","set","delete","Link","_ref3","to","props","objectWithoutProperties","prefetch","useCallback","console","log","has","get","fetcher","then","v","assign","onMouseEnter","rootElement","document","getElementById","ReactDOM","render","lazy_wouter_Link","lazy_wouter_Router","lazy_wouter_Route","Promise","all","__webpack_require__","e","bind"],"mappings":"8KAYMA,EAAeC,wBAAc,IAAIC,KACjCC,EAAW,kBAAMC,qBAAWJ,IAE5BK,EAAS,SAAAC,GAA4B,IAAzBC,EAAyBD,EAAzBC,SAAUC,EAAeF,EAAfE,SAC1B,OACEC,EAAAC,EAAAC,cAACC,EAAA,SAAD,CAAUJ,SAAUA,GAClBC,EAAAC,EAAAC,cAACE,EAAA,EAAD,KAAUN,KAKVO,EAAQ,SAAAC,GAAuB,IAApBC,EAAoBD,EAApBC,KAAMC,EAAcF,EAAdE,QACfC,EAAQf,IADqBgB,EAEjBC,YAASJ,GAApBK,EAF4BC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,MAG7BK,EAAYC,kBAAQ,kBAAMC,eAAKT,IAAU,CAACA,IAShD,OAPAU,oBAAU,WAGR,OAFAT,EAAMU,IAAIZ,EAAMC,GAET,kBAAMC,EAAMW,OAAOb,KACzB,CAACE,EAAOF,EAAMC,IAGVI,GAAWZ,EAAAC,EAAAC,cAACa,EAAD,OAGdM,EAAO,SAAAC,GAAsB,IAAnBC,EAAmBD,EAAnBC,GAAOC,EAAYX,OAAAY,EAAA,EAAAZ,CAAAS,EAAA,QAC3Bb,EAAQf,IACRgC,EAAWC,sBAAY,YAC3BC,QAAQC,IAAI,uBAAwBN,GAEhCd,EAAMqB,IAAIP,KACEd,EAAMsB,IAAIR,EAExBS,GAAUC,KAAK,SAAAC,GAAC,OAAIA,KAErB,CAACzB,EAAOc,IAEX,OAAOvB,EAAAC,EAAAC,cAACE,EAAA,EAADS,OAAAsB,OAAA,CAAOZ,GAAIA,GAAQC,EAAnB,CAA0BY,aAAcV,YCtBjD,IAAMW,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OAAOzC,EAAAC,EAAAC,cAvBhB,WACE,OACEF,EAAAC,EAAAC,cAAA,eACEF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACwC,EAAD,CAAMnB,GAAG,WAAT,UACAvB,EAAAC,EAAAC,cAACwC,EAAD,CAAMnB,GAAG,WAAT,UACAvB,EAAAC,EAAAC,cAACwC,EAAD,CAAMnB,GAAG,SAAT,SAGFvB,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAACyC,EAAD,CAAQ5C,SAAS,cACfC,EAAAC,EAAAC,cAAC0C,EAAD,CAAOrC,KAAK,UAAUC,QAAS,kBAAMqC,QAAAC,IAAA,CAAAC,EAAAC,EAAA,GAAAD,EAAAC,EAAA,KAAAf,KAAAc,EAAAE,KAAA,cACrCjD,EAAAC,EAAAC,cAAC0C,EAAD,CAAOrC,KAAK,UAAUC,QAAS,kBAAMqC,QAAAC,IAAA,CAAAC,EAAAC,EAAA,GAAAD,EAAAC,EAAA,KAAAf,KAAAc,EAAAE,KAAA,cACrCjD,EAAAC,EAAAC,cAAC0C,EAAD,CAAOrC,KAAK,QAAQC,QAAS,kBAAMqC,QAAAC,IAAA,CAAAC,EAAAC,EAAA,GAAAD,EAAAC,EAAA,KAAAf,KAAAc,EAAAE,KAAA,mBAS/B,MAASZ","file":"static/js/main.e7b90200.chunk.js","sourcesContent":["import React, {\n  lazy,\n  Suspense,\n  useEffect,\n  useMemo,\n  useCallback,\n  createContext,\n  useContext\n} from \"react\";\n\nimport { Router as WRouter, Link as WLink, useRoute } from \"wouter\";\n\nconst PathsContext = createContext(new Map());\nconst usePaths = () => useContext(PathsContext);\n\nconst Router = ({ children, fallback }) => {\n  return (\n    <Suspense fallback={fallback}>\n      <WRouter>{children}</WRouter>\n    </Suspense>\n  );\n};\n\nconst Route = ({ path, factory }) => {\n  const paths = usePaths();\n  const [matches] = useRoute(path);\n  const Component = useMemo(() => lazy(factory), [factory]);\n\n  useEffect(() => {\n    paths.set(path, factory);\n\n    return () => paths.delete(path);\n  }, [paths, path, factory]);\n  \n\n  return matches && <Component />;\n};\n\nconst Link = ({ to, ...props }) => {\n  const paths = usePaths();\n  const prefetch = useCallback(() => {\n    console.log('try prefetch route: ', to)\n\n    if (paths.has(to)) {\n      let fetcher = paths.get(to);\n\n      fetcher().then(v => v);\n    }\n  }, [paths, to]);\n\n  return <WLink to={to} {...props} onMouseEnter={prefetch} />;\n};\n\nexport { Link, Route, Router };\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Router, Route, Link } from \"./lazy-wouter\";\n\nimport \"./styles.css\";\n\nfunction App() {\n  return (\n    <section>\n      <nav>\n        <Link to=\"/jquery\">jquery</Link>\n        <Link to=\"/lodash\">lodash</Link>\n        <Link to=\"/antd\">antd</Link>\n      </nav>\n\n      <main>\n        <center>\n          <Router fallback=\"loading...\">\n            <Route path=\"/jquery\" factory={() => import(\"./pages/jquery\")} />\n            <Route path=\"/lodash\" factory={() => import(\"./pages/lodash\")} />\n            <Route path=\"/antd\" factory={() => import(\"./pages/antd\")} />\n          </Router>\n        </center>\n      </main>\n    </section>\n  );\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}